<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Wed Nov 05 2025 13:44:19 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="690ae0eb75359955df89fff3" data-wf-site="68cecb820ec3dbdca3ef9099" lang="en">
<head>
  <meta charset="utf-8">
  <title>Financial Dashboard</title>
  <meta content="Financial Dashboard" property="og:title">
  <meta content="Financial Dashboard" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../css/new-real-estate-purchase.webflow.css" rel="stylesheet" type="text/css">
  <style>@media (min-width:992px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9af"] {height:0px;opacity:0;-webkit-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc99f"] {height:0px;opacity:0;-webkit-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9cc"] {height:0px;opacity:0;-webkit-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc994"] {height:0px;opacity:0;-webkit-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(0.5, 0.5, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}}@media (max-width:991px) and (min-width:768px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9cc"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9af"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc99f"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc994"] {height:0px;opacity:0;}}@media (max-width:767px) and (min-width:480px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9cc"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9af"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc99f"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc994"] {height:0px;opacity:0;}}@media (max-width:479px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9cc"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9af"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc99f"] {height:0px;opacity:0;}html.w-mod-js:not(.w-mod-ix) [data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc994"] {height:0px;opacity:0;}}</style>
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Droid Serif:400,400italic,700,700italic","PT Serif:400,400italic,700,700italic","Bitter:400,700,400italic","Vollkorn:400,400italic,700,700italic","Varela:400","Lato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic","Great Vibes:400","Merriweather:300,300italic,400,400italic,700,700italic,900,900italic","Exo:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","DM Sans:300,regular,500,600,700","Gilda Display:regular","Barlow Condensed:regular","Barlow:300italic,regular,italic,500","Material Icons Outlined:regular","Material Icons:regular"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../images/favicon.svg" rel="shortcut icon" type="image/x-icon">
  <link href="../images/webclip.jpg" rel="apple-touch-icon">
</head>
<body class="body-6">
  <section class="section-180">
    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar-logo-left-container style-three-header-container w-nav">
      <div class="container-two">
        <div class="navbar-wrapper-3">
          <div class="style-three-nav-brand">
            <a href="#" role="link" class="home-three-nav-menu-brand rezoid w-nav-brand"><img width="150" height="40" alt="" src="../images/TOR.png" loading="lazy" srcset="../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-500.png 500w, ../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-800.png 800w, ../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-1080.png 1080w, ../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-1600.png 1600w, ../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-2000.png 2000w, ../images/1394a00d76ce9dd861ade690dfb1a058_TOR-p-2600.png 2600w, ../images/TOR.png 2851w" sizes="150px"></a>
          </div>
          <div class="w-layout-hflex nav-link-box">
            <div class="w-layout-hflex nav-one-button-wrap">
              <div class="menu-button-2 w-nav-button"><img width="31" height="18" alt="Hambarger Menu" src="../images/Icon-nav-1.svg" loading="lazy"></div>
            </div>
          </div>
          <a role="link" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc97e" href="tel:+1800456789" class="style-three-phone-button responsive-hidden w-inline-block">
            <div class="home-three-call-button-text">
              <div class="style-three-phone-button-txt">Lets Talk</div>
              <div class="style-three-phone-button-txt">(800) 456 7890</div>
            </div>
            <div class="home-three-button-icon"><img width="46" height="46" alt="Call Icon" src="../images/Call-Icon.svg" loading="lazy" class="image-101"></div>
          </a>
          <div class="navbar-wrapper-4">
            <div class="style-three-nav-brand">
              <a href="#" role="link" class="home-three-nav-menu-brand rezoid w-nav-brand"></a>
            </div>
            <div class="w-layout-hflex nav-link-box">
              <nav role="navigation" class="nav-menu-wrapper-3 w-nav-menu">
                <ul role="list" class="nav-menu-two w-list-unstyled">
                  <li class="list-item-5 nav-five-list">
                    <div data-delay="0" data-hover="true" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc98d" class="home-three-dropdaown-2 w-dropdown">
                      <div class="style-three-menu-dropdown-toggle-5 w-dropdown-toggle">
                        <div class="home-three-dropdown">
                          <a href="#" class="w-inline-block">
                            <div class="home-three-dropdown-menu black-color">Home </div>
                          </a>
                        </div><img width="9" height="9" alt="Plus" src="../images/Plus.svg" loading="lazy" class="home-three-dropdown-icon">
                      </div>
                      <nav data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc994" class="home-three-dropdown-list w-dropdown-list"></nav>
                    </div>
                  </li>
                  <li class="list-item-5 nav-five-list">
                    <div data-delay="0" data-hover="true" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc996" class="home-three-dropdaown-2 w-dropdown">
                      <div class="style-three-menu-dropdown-toggle-5 w-dropdown-toggle">
                        <div class="home-three-dropdown">
                          <a href="#" class="w-inline-block">
                            <div class="home-three-dropdown-menu black-color">ABOUT US</div>
                          </a>
                          <div class="home-three-dropdown-menu black-color">Pages</div>
                        </div><img width="9" height="9" alt="Plus" src="../images/Plus.svg" loading="lazy" class="home-three-dropdown-icon">
                      </div>
                      <nav data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc99f" class="home-three-dropdown-list w-dropdown-list">
                        <div class="home-three-dropdown-block">
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Who We Are</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Our Realtors</a>
                        </div>
                      </nav>
                    </div>
                  </li>
                  <li class="list-item-5 nav-five-list">
                    <div data-delay="0" data-hover="true" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9a6" class="home-three-dropdaown-2 w-dropdown">
                      <div class="style-three-menu-dropdown-toggle-5 w-dropdown-toggle">
                        <div class="home-three-dropdown">
                          <a href="#" class="w-inline-block">
                            <div class="home-three-dropdown-menu black-color">Realty SaSS</div>
                          </a>
                          <div class="home-three-dropdown-menu black-color">Properties</div>
                        </div><img width="9" height="9" alt="Plus" src="../images/Plus.svg" loading="lazy" class="home-three-dropdown-icon">
                      </div>
                      <nav data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9af" class="home-three-dropdown-list w-dropdown-list">
                        <div class="home-three-dropdown-block">
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">KPI Dashboard</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Psychology Insight</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Ask-Elena</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">RE-Defined</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">ZiPPED</a>
                        </div>
                      </nav>
                    </div>
                  </li>
                  <li class="list-item-5 nav-five-list">
                    <div data-delay="0" data-hover="true" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9bc" class="home-three-dropdaown-2 w-dropdown">
                      <div class="style-three-menu-dropdown-toggle-5 w-dropdown-toggle">
                        <div class="home-three-dropdown">
                          <a href="#" class="w-inline-block">
                            <div class="home-three-dropdown-menu black-color">BlogS &amp; MOre</div>
                          </a>
                          <div class="home-three-dropdown-menu black-color">Blog</div>
                        </div><img width="9" height="9" alt="Plus" src="../images/Plus.svg" loading="lazy" class="home-three-dropdown-icon">
                        <a href="#" role="button" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9c5" class="hero-button-3 nav-button w-inline-block">
                          <div class="button-mask">
                            <div style="-webkit-transform:translate3d(0, 0%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" class="link-text-wrp">
                              <div class="text-block-24">Contact us</div>
                              <div class="secondt-btn-text">Contact us</div>
                            </div>
                          </div>
                        </a>
                      </div>
                      <nav data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9cc" class="home-three-dropdown-list w-dropdown-list">
                        <div class="home-three-dropdown-block">
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">VA Loan</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Realtor Killer?</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Do I Need a Realtor?</a>
                          <a href="#" role="link" class="home-three-dropdown-link-2 w-dropdown-link">Beat the Realtor (Game)</a>
                        </div>
                      </nav>
                    </div>
                  </li>
                </ul>
              </nav>
              <div class="w-layout-hflex nav-one-button-wrap">
                <div class="menu-button-2 w-nav-button"><img width="31" height="18" alt="Hambarger Menu" src="../images/Icon-nav-1.svg" loading="lazy"></div>
              </div>
            </div>
            <a role="link" data-w-id="7da5a282-caee-8ee6-d7af-95e70c8bc9d9" href="tel:+1800456789" class="style-three-phone-button responsive-hidden w-inline-block">
              <div class="home-three-call-button-text">
                <div class="style-three-phone-button-txt">Lets Talk</div>
                <div class="style-three-phone-button-txt">(800) 456 7890</div>
              </div>
              <div class="home-three-button-icon"><img width="46" height="46" alt="Call Icon" src="../images/Call-Icon.svg" loading="lazy" class="image-102"></div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="code-embed-11 w-embed"><!--  ============================
 OrozcoRealty • Financial Dashboard v4.1 (A.I.O.U Theme)
 EMBED #1 of 2  (HTML + CSS + Section Containers)
 - Full re-theme to A.I.O.U. visual system
 - Gradient-glass, mint+blue dual accent, glow logic preserved
============================  -->
    <div id="rs-shell" style="all: initial;">
      <!--  Fonts  -->
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
      <style>
  /* =========================================================
     //#1 GLOBAL TOKENS / RESET
     ========================================================= */
  #rs-shell, #rs-shell * {
    box-sizing: border-box;
    font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  :root {
    --bg: #0b0e1a;
    --panel: #101426;
    --panel-2: #0f1324;
    --ink: #e9ecff;
    --muted: #a8b0d6;
    --border: rgba(255,255,255,.10);
    --accent: #8ef3c5;
    --accent2: #6aa7ff;
    --accent-glow: 0 0 24px rgba(142,243,197,.25), 0 0 12px rgba(106,167,255,.25);
    --radius: 18px;
    --blur: 20px;
    --speed: .2s;
    --on: #d9e7ff;
    --off: #7d8db0;
    --warn: #f9c74f;
    --bad: #ff6b6b;
    --ok: #55d399;
  }
  body, html, #rs-shell {
    background: radial-gradient(1200px 480px at 70% -10%, rgba(142,243,197,.08), transparent 60%),
                radial-gradient(900px 420px at 40% -6%, rgba(106,167,255,.06), transparent 55%),
                linear-gradient(180deg,#0b0e1a 0%,#090c17 100%);
    color: var(--ink);
    min-height: 100vh;
    padding: 0;
    margin: 0;
  }
  /* =========================================================
     //#2 GRID STRUCTURE
     ========================================================= */
  #rs-shell .app {
    display: grid;
    grid-template-columns: 270px 1fr;
    min-height: 100vh;
  }
  @media (max-width: 800px) {
    #rs-shell .app { grid-template-columns: 1fr; }
  }
  /* =========================================================
     //#3 SIDEBAR
     ========================================================= */
  .rs-sidebar {
    background: rgba(16,20,38,0.9);
    backdrop-filter: blur(var(--blur));
    border-right: 1px solid var(--border);
    padding: 24px 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    box-shadow: inset 0 0 40px rgba(0,0,0,.6);
  }
  @media (max-width: 800px) {
    .rs-sidebar {
      border-right: none;
      border-bottom: 1px solid var(--border);
    }
  }
  .rs-brand {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 800;
    font-size: 14px;
    color: var(--on);
    text-transform: uppercase;
    letter-spacing: .4px;
  }
  .rs-brand .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent2));
    box-shadow: var(--accent-glow);
  }
  .rs-section {
    margin-top: 12px;
    font-size: 11px;
    text-transform: uppercase;
    color: var(--muted);
    letter-spacing: .4px;
    font-weight: 600;
  }
  .rs-nav {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .rs-item {
    position: relative;
    background: rgba(255,255,255,.03);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--ink);
    padding: 12px;
    font-weight: 600;
    transition: all var(--speed);
    cursor: pointer;
    text-align: left;
    box-shadow: 0 8px 18px rgba(0,0,0,.5);
  }
  .rs-item:hover {
    border-color: var(--accent);
    box-shadow: 0 0 20px rgba(142,243,197,.25), 0 0 10px rgba(106,167,255,.25);
  }
  .rs-item.active {
    background: linear-gradient(135deg, rgba(142,243,197,.15), rgba(106,167,255,.12));
    border-color: rgba(142,243,197,.35);
    box-shadow: var(--accent-glow);
  }
  .rs-item.locked {
    opacity: .5;
    pointer-events: none;
  }
  .rs-chip {
    display: block;
    text-align: center;
    font-weight: 800;
    border-radius: var(--radius);
    padding: 12px;
    font-size: 13px;
    text-decoration: none;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #0b0e1a;
    box-shadow: var(--accent-glow);
    border: none;
  }
  /* =========================================================
     //#4 MAIN PANEL / KPI STRIP
     ========================================================= */
  .rs-main {
    padding: 28px;
  }
  .rs-main section {
    display: none;
    opacity: 0;
    transition: opacity .4s ease;
  }
  .rs-main section.active {
    display: block;
    opacity: 1;
  }
  .va-card {
    background: rgba(255,255,255,.03);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: inset 0 0 32px rgba(142,243,197,.1), 0 16px 40px rgba(0,0,0,.75);
    margin-bottom: 20px;
  }
  .va-card h2 {
    font-size: 18px;
    font-weight: 700;
    color: var(--accent);
    margin-bottom: 10px;
  }
  .va-card p {
    font-size: 14px;
    color: var(--muted);
  }
  </style>
      <!--  =========================================================
       //#7 HTML STRUCTURE (with functional sections)
       =========================================================  -->
      <div class="app">
        <!--  SIDEBAR  -->
        <aside class="rs-sidebar">
          <div class="rs-brand">
            <div class="dot"></div>
            <div>Financial Dashboard</div>
          </div>
          <div class="rs-section">Dashboard</div>
          <div class="rs-nav">
            <div class="rs-item active" data-panel="profile">Profile</div>
            <div class="rs-item" data-panel="income">Income</div>
            <div class="rs-item" data-panel="expenses">Expenses</div>
            <div class="rs-item" data-panel="savings">Savings</div>
            <div class="rs-item" data-panel="mortgage">Home Purchase</div>
          </div>
          <div class="rs-footer">
            <a id="btn-analyze" class="rs-chip" href="../verify.html">Analyze</a>
          </div>
        </aside>
        <!--  MAIN PANELS  -->
        <main class="rs-main">
          <section id="sec-profile" class="active">
            <div class="va-card">
              <h2>Profile</h2>
              <p>Enter your rank, branch, and family details here. Your information will personalize calculations and BAH data.</p>
            </div>
          </section>
          <section id="sec-income">
            <div class="va-card">
              <h2>Income</h2>
              <p>Input your monthly base pay, BAH, BAS, and any secondary income to calculate your total net monthly income.</p>
            </div>
          </section>
          <section id="sec-expenses">
            <div class="va-card">
              <h2>Expenses</h2>
              <p>Add your recurring monthly costs (utilities, groceries, childcare, subscriptions, etc.) to project disposable income.</p>
            </div>
          </section>
          <section id="sec-savings">
            <div class="va-card">
              <h2>Savings</h2>
              <p>Track your savings balance, contribution rate, and emergency fund goals. Results will affect your financial grade.</p>
            </div>
          </section>
          <section id="sec-mortgage">
            <div class="va-card">
              <h2>Home Purchase</h2>
              <p>Enter your target home price, interest rate, and down payment. The dashboard will estimate monthly mortgage and break-even timeline.</p>
            </div>
          </section>
        </main>
      </div>
    </div>
  </div>
  <section>
    <section>
      <div class="w-embed w-script"><!--  ============================
 OrozcoRealty • Financial Dashboard v4.0
 EMBED #2 of 2  (FULL JS LOGIC)
 - Paste this SECOND, directly under Embed #1, same page
 - Handles:
   • AD/VET income math
   • Mortgage math
   • Monthly expense budgets
   • KPI / Grade
   • Bridge → /verify  (now includes ALL monthlyHistory)
============================  -->
        <script>
(function RS_DASHBOARD_V4(){
  if (window.__RS_DASH_V4_MOUNTED__) return;
  window.__RS_DASH_V4_MOUNTED__ = true;
  /* =======================
     #0 SMALL HELPERS
  ======================= */
  const $=(q,root=document)=>root.querySelector(q);
  const $$=(q,root=document)=>Array.from(root.querySelectorAll(q));
  const fmt=n=>(Number(n)||0).toLocaleString(
    "en-US",
    {style:"currency",currency:"USD",maximumFractionDigits:0}
  );
  function rsPMTI(P,r,n){
    if(r===0) return P/n;
    const x=Math.pow(1+r,n);
    return P*(r*x)/(x-1);
  }
  function rsAPRFromScore(s){
    s=+s||720;
    return s>=780?6.50
      : s>=760?6.75
      : s>=720?7.00
      : s>=700?7.20
      : s>=680?7.35
      : s>=660?7.85
      : s>=640?8.25
      : s>=620?9.25
      : 9.95;
  }
  // month keys like "2025-11"
  function monthKeyFromDate(d){
    return d.getFullYear()+"-"+String(d.getMonth()+1).padStart(2,"0");
  }
  /* =======================
     #1 DOM REFS
  ======================= */
  const elMap = {
    kIncome:     $('#kpi-income'),
    kExp:        $('#kpi-expenses'),
    kMortgage:   $('#kpi-mortgage'),
    kSave:       $('#kpi-savings'),
    kDisp:       $('#kpi-disposable'),
    gradeDot:    $('#grade-dot'),
    gradeLetter: $('#grade-letter'),
    gradeBand:   $('#grade-band'),
    gradeMeter:  $('#grade-meter'),
    gradeLeft:   $('#grade-leftover'),
    // profile + status
    milToggle:   $('.mil-toggle'),
    // active duty / vet income fields
    inBase:      $('#in-base'),
    inBAH:       $('#in-bah'),
    inBAS:       $('#in-bas'),
    inAddl:      $('#in-addl'),
    inRet:       $('#in-ret'),
    inVA:        $('#in-va'),
    inAddlVet:   $('#in-addl-vet'),
    milBreak:    $('#mil-breakdown'),
    // expenses (monthly budget)
    monthSelect: $('#month-select'),
    monthStatus: $('#month-status-hint'),
    exCore:      $('#ex-core'),
    exDisc:      $('#ex-disc'),
    // budget rows table
    bpCat:       $('#bp-cat'),
    bpName:      $('#bp-name'),
    bpMonth:     $('#bp-month'),
    bpAdd:       $('#bp-add'),
    bpBody:      $('#bp-body'),
    bpSaveMonth: $('#bp-save-month'),
    bpNote:      $('#bp-note'),
    // totals badges
    tEss:        $('#bp-t-Essentials'),
    tDisc:       $('#bp-t-Discretionary'),
    tDebt:       $('#bp-t-Debt'),
    tOther:      $('#bp-t-Other'),
    tAll:        $('#bp-t-All'),
    // savings
    saveRate:    $('#save-rate'),
    saveRateLbl: $('#save-rate-label'),
    svCurrent:   $('#sv-current'),
    svInvest:    $('#sv-invest'),
    svNotes:     $('#sv-notes'),
    // mortgage
    cs:          $('#cs-slider'),
    csLabel:     $('#cs-label'),
    aprLabel:    $('#apr-label'),
    hPrice:      $('#h-price'),
    dpSlider:    $('#dp-slider'),
    dpPctLabel:  $('#dp-pct-label'),
    dpAmtLabel:  $('#dp-amt-label'),
    dpAmt:       $('#dp-amt'),
    hRate:       $('#h-rate'),
    hTerm:       $('#h-term'),
    hTIHOA:      $('#h-tihoa'),
    hPMI:        $('#h-pmi'),
    // benefits
    bFunding:    $('#b-funding .v'),
    bFundingBox: $('#b-funding'),
    bTax:        $('#b-tax .v'),
    bTaxBox:     $('#b-tax'),
    bEEM:        $('#b-eem .v'),
    bSeller:     $('#b-seller .v'),
    bAccess:     $('#b-access .v'),
    bPurple:     $('#b-purple .v'),
    btnAddProfile: $('#pf-addprofile'),
    analyzeBtn: $('#btn-analyze'),
    btnCalc:    $('#btn-calc'),
    btnClear:   $('#btn-clear'),
  };
  /* =======================
     #2 NAV PANEL SWITCH
  ======================= */
  (function navSetup(){
    const panels=['profile','income','expenses','savings','mortgage'];
    function show(which){
      panels.forEach(p=>{
        $('#sec-'+p)?.classList.toggle('active', p===which);
        $(`.rs-item[data-panel="${p}"]`)?.classList.toggle('active', p===which);
      });
    }
    document.addEventListener('click', e=>{
      const btn=e.target.closest('.rs-item[data-panel]');
      if(!btn) return;
      e.preventDefault();
      show(btn.dataset.panel);
    });
    // default open "income"
    show('income');
  })();
  /* =======================
     #3 DATA TABLES / LOOKUPS
  ======================= */
  const PAYGRADE_TITLES={
    "E-1":"AB","E-2":"Amn","E-3":"A1C","E-4":"SrA","E-5":"SSgt","E-6":"TSgt",
    "E-7":"MSgt","E-8":"SMSgt","E-9":"CMSgt",
    "W-1":"WO1","W-2":"CWO2","W-3":"CWO3","W-4":"CWO4","W-5":"CWO5",
    "O-1":"2nd Lt","O-2":"1st Lt","O-3":"Captain","O-4":"Major","O-5":"Lt Col",
    "O-6":"Colonel","O-7":"Brig Gen","O-8":"Maj Gen","O-9":"Lt Gen","O-10":"Gen"
  };
  function LSget(k){
    try{ return JSON.parse(localStorage.getItem(k)||'null'); }
    catch{ return null; }
  }
  const BASEPAY = LSget('rs.pay.BASEPAY') || { "E-6":{o8:4444} };
  const BAS     = LSget('rs.pay.BAS') || {enlisted:465.77,officer:320.78};
  const BAH78236= LSget('rs.pay.BAH.78236') || {with:{E6:2154}, without:{E6:1656}};
  const VATABLE = LSget('va.comp.table') || {
    70:{
      vet:1716.28,
      vet_spouse:1826,
      vet_one_child:1850,
      vet_spouse_one_child:1940,
      add_child_u18:90,
      add_child_s:230,
      spouse_aanda:110,
      add_parent:125
    },
    0:{vet:0,vet_spouse:0,vet_one_child:0,vet_spouse_one_child:0,
       add_child_u18:0,add_child_s:0,spouse_aanda:0,add_parent:0}
  };
  const yosTiers=['a2','o2','o3','o4','o6','o8','o10','o12','o14','o16','o18','o20','o22','o24'];
  function yosTier(y){
    y=+y||0;
    if(y<=2)return'a2';
    if(y<=3)return'o2';
    if(y<=4)return'o3';
    if(y<=6)return'o4';
    if(y<=8)return'o6';
    if(y<=10)return'o8';
    if(y<=12)return'o10';
    if(y<=14)return'o12';
    if(y<=16)return'o14';
    if(y<=18)return'o16';
    if(y<=20)return'o18';
    if(y<=22)return'o20';
    if(y<=24)return'o22';
    return'o24';
  }
  function normRankForBase(r){
    if(!r) return 'E-1';
    if(/^W-\d+$/i.test(r)){
      const n=+r.split('-')[1];
      return n<=1?'O-1':n===2?'O-2':n===3?'O-3':n===4?'O-4':'O-5';
    }
    if(/^O-(7|8|9|10)$/i.test(r)) return 'O-6';
    return r;
  }
  function basePayNearest(rank,years){
    const use=normRankForBase(rank);
    const t=BASEPAY[use]||{};
    const want=yosTier(years);
    let i=yosTiers.indexOf(want);
    if(i<0) i=yosTiers.length-1;
    for(let k=i;k>=0;k--){
      const key=yosTiers[k];
      if(t[key]!=null) return t[key];
    }
    const keys=Object.keys(t);
    return keys.length?t[keys[0]]:0;
  }
  function basByRank(r){
    return (/^(O-|W-)/.test(r||''))? BAS.officer:BAS.enlisted;
  }
  function bahSATX(rank,deps){
    const norm=(rank||'').replace('-','').toUpperCase();
    const table=BAH78236[deps==='without'?'without':'with'];
    return table?.[norm]??0;
  }
  function retirementMonthly(rank,years){
    years=Math.max(0,Math.min(40,+years||0));
    const high3=basePayNearest(rank,Math.max(2,years));
    const mult=years*0.025;
    return Math.round(high3*mult);
  }
  function vaCompMonthly(opts){
    const r = Math.max(0,Math.min(100,Number(opts.rating)||0));
    const rating = (r===0?0:(r===100?100:Math.round(r/10)*10));
    const row = VATABLE[rating]||VATABLE[0];
    const spouse = opts.spouse==='Yes';
    const kidsU18 = Math.max(0,+opts.kidsU18||0);
    const kidsS   = Math.max(0,+opts.kidsS||0);
    const parents = Math.max(0,Math.min(2,+opts.parents||0));
    const spouseA = opts.spouseA==='Yes';
    let base=0;
    if(spouse){
      base = (kidsU18+kidsS)>0?row.vet_spouse_one_child:row.vet_spouse;
    } else {
      base = (kidsU18+kidsS)>0?row.vet_one_child:row.vet;
    }
    let add=0;
    const extraCount=Math.max(0,(kidsU18+kidsS)-1);
    if(extraCount>0){
      const takeU18=Math.max(0,Math.min(extraCount,Math.max(0,kidsU18-1)));
      const takeS = extraCount-takeU18;
      add += takeU18*(row.add_child_u18||0) + takeS*(row.add_child_s||0);
    }
    if((kidsU18+kidsS)===0){
      add += kidsU18*(row.add_child_u18||0) + kidsS*(row.add_child_s||0);
    }
    add += parents*(row.add_parent||0);
    if(spouse && spouseA) add += (row.spouse_aanda||0);
    return Math.round(base+add);
  }
  /* =======================
     #4 STATE
  ======================= */
  let MODE='VET';
  let monthData=LSget('rs.monthly')||{};
  let activeMonthKey = (()=>{
    const nowKey = monthKeyFromDate(new Date());
    if(monthData[nowKey]) return nowKey;
    return nowKey;
  })();
  let BP_ROWS=[];
  let BP_ID=1;
  /* =======================
     #5 MODE TOGGLING
  ======================= */
  function applyMode(){
    $$('.ad-only').forEach(n=>{
      n.style.display = (MODE==='AD')?'grid':'none';
    });
    $$('.vet-only').forEach(n=>{
      n.style.display = (MODE==='VET')?'grid':'none';
    });
    $$('.mil-pill').forEach(p=>{
      p.classList.toggle('active', p.dataset.mode===MODE);
    });
    updateIncomeNumbers();
    renderAll();
    persistIdentity();
  }
  function hydrateProfileCard(card){
    const selRank   = card.querySelector('.sel-rank');
    const retRank   = card.querySelector('.ret-rank');
    const selYears  = card.querySelector('.sel-years');
    const ranks=['E-1','E-2','E-3','E-4','E-5','E-6','E-7','E-8','E-9',
                 'W-1','W-2','W-3','W-4','W-5',
                 'O-1','O-2','O-3','O-4','O-5','O-6','O-7','O-8','O-9','O-10'];
    if(selRank){
      selRank.innerHTML = ranks.map(r=>`<option value="${r}">${r}</option>`).join('');
      selRank.value='E-6';
    }
    if(retRank){
      retRank.innerHTML = ranks.map(r=>`<option value="${r}">${r}</option>`).join('');
    }
    if(selYears){
      let yOpt='';
      for(let i=2;i<=24;i++) yOpt+=`<option value="${i}">${i}</option>`;
      selYears.innerHTML=yOpt;
      selYears.value='10';
    }
    card.querySelector('.mil-toggle')?.addEventListener('click', e=>{
      const pill=e.target.closest('.mil-pill');
      if(!pill) return;
      MODE = (pill.dataset.mode==='AD')?'AD':'VET';
      applyMode();
    });
    const vslider=card.querySelector('.va-rate');
    const vlabel=card.querySelector('.va-rate-label');
    vslider?.addEventListener('input',()=>{
      if(vlabel) vlabel.textContent=vslider.value+'%';
      if(MODE==='VET') updateIncomeNumbers();
    });
    [
      '.pf-fname','.pf-lname','.pf-email','.pf-phone',
      '.sel-rank','.ret-rank','.sel-years','.sel-deps',
      '.ret-years','.va-has-spouse','.va-kids-u18','.va-kids-s',
      '.va-parents','.va-spouse-aanda','.va-rate'
    ].forEach(sel=>{
      card.querySelector(sel)?.addEventListener('input',()=>{
        updateIncomeNumbers();
        renderAll();
        persistIdentity();
      });
      card.querySelector(sel)?.addEventListener('change',()=>{
        updateIncomeNumbers();
        renderAll();
        persistIdentity();
      });
    });
    [
      '.va-survivor','.prop-state','.prop-home','.prop-tax-relief',
      '.va-access','.va-eem','.va-eem-amt','.va-seller'
    ].forEach(sel=>{
      card.querySelector(sel)?.addEventListener('input',()=>{
        persistProfileToStorage();
        renderBenefits();
        renderAll();
      });
      card.querySelector(sel)?.addEventListener('change',()=>{
        persistProfileToStorage();
        renderBenefits();
        renderAll();
      });
    });
  }
  hydrateProfileCard($('.profile-card'));
  elMap.btnAddProfile?.addEventListener('click',()=>{
    const stack = $('#profile-stack');
    const base  = stack.querySelector('.profile-card');
    const clone = base.cloneNode(true);
    const newIdx= stack.querySelectorAll('.profile-card').length+1;
    clone.setAttribute('data-profile-idx',String(newIdx));
    clone.querySelector('.idx').textContent = 'Member '+newIdx;
    clone.querySelectorAll('input').forEach(inp=>{
      if(inp.type==='range') return;
      if(!inp.classList.contains('ret-years')){
        inp.value='';
      }
    });
    stack.appendChild(clone);
    hydrateProfileCard(clone);
    const oldTxt = elMap.btnAddProfile.textContent;
    elMap.btnAddProfile.textContent='Profile Added ✓';
    setTimeout(()=>{ elMap.btnAddProfile.textContent=oldTxt; },1100);
  });
  /* =======================
     #6 IDENTITY / PROFILE STORAGE
  ======================= */
  function getActiveCard(){
    return $('.profile-card');
  }
  function currentPaygrade(){
    const card=getActiveCard();
    const rankAD = card?.querySelector('.sel-rank')?.value || '';
    const rankV  = card?.querySelector('.ret-rank')?.value || '';
    const raw = (MODE==='AD'?rankAD:rankV) || rankAD || rankV || '';
    const m = /^([EOW])[-\s]?(\d{1,2})$/i.exec(raw||'');
    return m? (m[1].toUpperCase()+"-"+m[2]) : raw || '';
  }
  function persistIdentity(){
    const card = getActiveCard();
    const first=(card?.querySelector('.pf-fname')?.value||'').trim();
    const last =(card?.querySelector('.pf-lname')?.value||'').trim();
    const email=(card?.querySelector('.pf-email')?.value||'').trim();
    const phone=(card?.querySelector('.pf-phone')?.value||'').trim();
    const pg = currentPaygrade();
    const title = PAYGRADE_TITLES[pg]||pg||'';
    const name=[first,last].filter(Boolean).join(' ').trim()||'Client';
    const ident={
      firstName:first,
      lastName:last,
      name,
      email,
      phone,
      rankPaygrade:pg,
      rankTitle:title,
      mode:MODE
    };
    try{
      localStorage.setItem('realtysass.identity', JSON.stringify(ident));
      const prof = getProfileStore()||{};
      prof.name = name;
      prof.email= email;
      localStorage.setItem('realtysass.profile', JSON.stringify(prof));
    }catch(_){}
    return ident;
  }
  function getProfileStore(){
    try { return JSON.parse(localStorage.getItem('realtysass.profile')||'{}'); }
    catch { return {}; }
  }
  function persistProfileToStorage(){
    const card=getActiveCard();
    const prof=getProfileStore();
    Object.assign(prof,{
      survivor: card?.querySelector('.va-survivor')?.value,
      pstate:   card?.querySelector('.prop-state')?.value,
      home:     card?.querySelector('.prop-home')?.value,
      taxRelief:card?.querySelector('.prop-tax-relief')?.value,
      access:   card?.querySelector('.va-access')?.value,
      eem:      card?.querySelector('.va-eem')?.value,
      eemAmt:   +(card?.querySelector('.va-eem-amt')?.value||0),
      seller:   Math.min(4, Math.max(0, +(card?.querySelector('.va-seller')?.value||0)))
    });
    try{
      localStorage.setItem('realtysass.profile', JSON.stringify(prof));
    }catch(_){}
    return prof;
  }
  /* =======================
     #7 INCOME CALC
  ======================= */
  function adYears(){ return +(getActiveCard()?.querySelector('.sel-years')?.value || 10); }
  function adRank(){ return getActiveCard()?.querySelector('.sel-rank')?.value || 'E-6'; }
  function adDeps(){ return getActiveCard()?.querySelector('.sel-deps')?.value || 'with'; }
  function updateIncomeNumbers(){
    if(MODE==='AD'){
      const rank=adRank(), years=adYears(), deps=adDeps();
      const base = basePayNearest(rank,years);
      const basPay= basByRank(rank);
      const bah  = bahSATX(rank,deps);
      if(elMap.inBase) elMap.inBase.value = Math.round(base);
      if(elMap.inBAS)  elMap.inBAS.value  = Math.round(basPay);
      if(elMap.inBAH)  elMap.inBAH.value  = Math.round(bah);
      if(elMap.milBreak){
        elMap.milBreak.textContent =
          `AD: Base ${fmt(base)} + BAS ${fmt(basPay)} + BAH ${fmt(bah)} = ${fmt(base+basPay+bah)}.`;
      }
    } else {
      const card=getActiveCard();
      const ret=retirementMonthly(
        card?.querySelector('.ret-rank')?.value || 'E-6',
        card?.querySelector('.ret-years')?.value || 20
      );
      const vac=vaCompMonthly({
        rating:  card?.querySelector('.va-rate')?.value || 70,
        spouse:  card?.querySelector('.va-has-spouse')?.value || 'No',
        kidsU18: card?.querySelector('.va-kids-u18')?.value || 0,
        kidsS:   card?.querySelector('.va-kids-s')?.value || 0,
        parents: card?.querySelector('.va-parents')?.value || 0,
        spouseA: card?.querySelector('.va-spouse-aanda')?.value || 'No'
      });
      if(elMap.inRet) elMap.inRet.value = ret;
      if(elMap.inVA)  elMap.inVA.value  = vac;
      if(elMap.milBreak){
        elMap.milBreak.textContent =
          `VET: Retirement ${fmt(ret)} + VA ${fmt(vac)} (rating ${card?.querySelector('.va-rate')?.value||0}%).`;
      }
    }
  }
  function computeSnapshot(){
    let income=0;
    if(MODE==='AD'){
      income =
        (+elMap.inBase.value||0)+
        (+elMap.inBAS.value||0)+
        (+elMap.inBAH.value||0)+
        (+elMap.inAddl.value||0);
    } else {
      income =
        (+elMap.inRet.value||0)+
        (+elMap.inVA.value||0)+
        (+elMap.inAddlVet.value||0);
    }
    const baseCore = +elMap.exCore.value||0;
    const baseDisc = +elMap.exDisc.value||0;
    const saveRatePct = Math.max(0,Math.min(40,Number(elMap.saveRate.value)||0));
    const saveContribution = income*(saveRatePct/100);
    const totalExpenses = baseCore + baseDisc + saveContribution;
    const currentSavings = +elMap.svCurrent.value||0;
    const savingsTotalKPI = saveContribution + currentSavings;
    const inferredAPR = rsAPRFromScore(elMap.cs.value);
    const usedAPR = Number(elMap.hRate.value)||inferredAPR;
    const price = +elMap.hPrice.value||0;
    const dpPct = (Number(elMap.dpSlider.value)||0)/100;
    const downAmount = Math.max(0, price*dpPct);
    const prof=getProfileStore();
    const eemAdd = (prof.eem==='Yes')
      ? Math.max(0, Math.min(+prof.eemAmt||0,15000))
      : 0;
    const loan = Math.max(0, price - downAmount + eemAdd);
    const mRate = (usedAPR||0)/100/12;
    const nMonths = Math.max(1,(Number(elMap.hTerm.value)||30)*12);
    const pAndI = loan>0?rsPMTI(loan,mRate,nMonths):0;
    const tihoa = +elMap.hTIHOA.value||0;
    const pmi   = +elMap.hPMI.value||0;
    const housing = pAndI + tihoa + pmi;
    const disposable = income - totalExpenses - housing;
    return {
      income,
      baseCore,
      baseDisc,
      saveContribution,
      totalExpenses,
      savingsTotalKPI,
      disposable,
      housing,
      dpPct,
      downAmount,
      inferredAPR,
      usedAPR,
      pAndI,
      tihoa,
      pmi,
      price
    };
  }
  /* =======================
     #8 GRADE + BENEFITS
  ======================= */
  function computeGrade(snap){
    const burnShare = (snap.baseCore + snap.baseDisc + snap.saveContribution + snap.housing) / (snap.income||1);
    const housingShare = snap.housing / (snap.income||1);
    let g=92;
    if(burnShare>=0.85) g-=30; else if(burnShare>=0.70) g-=15; else g+=4;
    if(housingShare>0.40) g-=18; else if(housingShare>0.33) g-=8; else g+=4;
    if(snap.disposable < 0) g-=30;
    const saveRatePct = (snap.saveContribution/(snap.income||1));
    if(saveRatePct<0.10) g-=8; else if(saveRatePct>=0.20) g+=4;
    g = Math.max(0,Math.min(100,g));
    const letter =
      g>=98?'A+': g>=92?'A': g>=88?'A-'
      : g>=82?'B+': g>=76?'B': g>=72?'B-'
      : g>=66?'C+': g>=60?'C': g>=55?'C-'
      : g>=50?'D+': g>=45?'D':'F';
    const score=+elMap.cs.value||720;
    const band = score>=760?'Excellent'
               : score>=720?'Good'
               : score>=680?'Fair'
               : score>=640?'OK-ish'
               : score>=620?'Weak'
               : 'Subprime';
    return {letter, burnShare, band};
  }
  function renderBenefits(){
    const prof = persistProfileToStorage();
    const price = +elMap.hPrice.value||0;
    const sellerCapPct = Math.min(4, Math.max(0, +(prof.seller||0)));
    const sellerCapAmt = price*(sellerCapPct/100);
    const vaRating = Number(getActiveCard()?.querySelector('.va-rate')?.value||0);
    const ffEx = (vaRating>0) || (prof.survivor==='Yes');
    if(elMap.bFunding){
      elMap.bFunding.textContent = ffEx
        ? 'Exempt'
        : 'Not Exempt (calc at closing)';
    }
    elMap.bFundingBox?.classList.toggle('ok',ffEx);
    const txOk = (prof.pstate==='TX' && prof.home==='Yes' && prof.taxRelief==='Yes');
    if(elMap.bTax){
      elMap.bTax.textContent = txOk
        ? 'TX Homestead Disabled-Vet: Likely Exempt'
        : (prof.taxRelief==='Yes'
            ? 'Relief Likely'
            : (prof.taxRelief==='Unsure'?'Need review':'No'));
    }
    elMap.bTaxBox?.classList.toggle('ok',txOk);
    elMap.bTaxBox?.classList.toggle('warn',prof.taxRelief==='Unsure');
    if(elMap.bEEM){
      elMap.bEEM.textContent = (prof.eem==='Yes')
        ? (prof.eemAmt?('Financed: '+fmt(prof.eemAmt)):'Enabled (no $ set)')
        : 'Not used';
    }
    if(elMap.bSeller){
      elMap.bSeller.textContent = sellerCapPct
        ? (sellerCapPct.toFixed(1)+'% → '+fmt(sellerCapAmt))
        : '0%';
    }
    if(elMap.bAccess){
      elMap.bAccess.textContent = prof.access==='Yes'
        ? 'May qualify (SAH/SHA/HISA)'
        : 'Not indicated';
    }
    if(elMap.bPurple){
      elMap.bPurple.textContent = '—';
    }
  }
  /* =======================
     #9 BUDGET TABLE (MONTHLY)
  ======================= */
  function bpTotals(){
    const t={Essentials:0,Discretionary:0,Debt:0,Other:0};
    BP_ROWS.forEach(r=>{
      const cat = r.cat||'Other';
      t[cat]=(t[cat]||0)+(+r.month||0);
    });
    t.All=t.Essentials+t.Discretionary+t.Debt+t.Other;
    return t;
  }
  function bpTotalsUI(){
    const t=bpTotals();
    if(elMap.tEss)  elMap.tEss.textContent  = fmt(t.Essentials);
    if(elMap.tDisc) elMap.tDisc.textContent = fmt(t.Discretionary);
    if(elMap.tDebt) elMap.tDebt.textContent = fmt(t.Debt);
    if(elMap.tOther)elMap.tOther.textContent= fmt(t.Other);
    if(elMap.tAll)  elMap.tAll.textContent  = fmt(t.All);
  }
  function bpRender(){
    if(!elMap.bpBody) return;
    elMap.bpBody.innerHTML='';
    BP_ROWS.forEach(r=>{
      const tr=document.createElement('tr');
      tr.className='bp-tr';
      tr.innerHTML=`
        <td class="bp-td" style="min-width:100px;">
          <select class="va-select bp-cat" data-id="${r.id}">
            <option ${r.cat==='Essentials'?'selected':''}>Essentials</option>
            <option ${r.cat==='Discretionary'?'selected':''}>Discretionary</option>
            <option ${r.cat==='Debt'?'selected':''}>Debt</option>
            <option ${r.cat==='Other'?'selected':''}>Other</option>
          </select>
        </td>
        <td class="bp-td">
          <input class="va-input bp-name" data-id="${r.id}" value="${r.name||''}">
        </td>
        <td class="bp-td" style="width:140px;">
          <input class="va-input bp-month" data-id="${r.id}" type="number" min="0" step="1" value="${r.month||0}">
        </td>
        <td class="bp-td" style="width:100px;">${fmt((r.month||0)*12)}</td>
        <td class="bp-td" style="width:80px;">
          <button class="va-btn ghost bp-del" data-id="${r.id}">✕</button>
        </td>`;
      elMap.bpBody.appendChild(tr);
    });
    $$('.bp-cat').forEach(x=>{
      x.addEventListener('change',e=>{
        const rr=BP_ROWS.find(z=>z.id==e.target.dataset.id);
        if(rr){ rr.cat=e.target.value; bpTotalsUI(); renderAll(); }
      });
    });
    $$('.bp-name').forEach(x=>{
      x.addEventListener('input',e=>{
        const rr=BP_ROWS.find(z=>z.id==e.target.dataset.id);
        if(rr){ rr.name=e.target.value; }
      });
    });
    $$('.bp-month').forEach(x=>{
      x.addEventListener('input',e=>{
        const rr=BP_ROWS.find(z=>z.id==e.target.dataset.id);
        if(rr){ rr.month=+e.target.value||0; bpTotalsUI(); renderAll(); }
      });
    });
    $$('.bp-del').forEach(x=>{
      x.addEventListener('click',e=>{
        BP_ROWS = BP_ROWS.filter(r=>r.id!==+e.target.dataset.id);
        bpRender();
        renderAll();
      });
    });
    bpTotalsUI();
  }
  function populateMonthSelect(){
    if(!elMap.monthSelect) return;
    const baseDate=new Date();
    const opts=[];
    for(let offset=-2; offset<=4; offset++){
      const d=new Date(baseDate.getFullYear(), baseDate.getMonth()+offset, 1);
      const y=d.getFullYear();
      const m=d.toLocaleString('en-US',{month:'short'});
      const key=monthKeyFromDate(d);
      const label=m+" "+y;
      opts.push({key,label});
    }
    elMap.monthSelect.innerHTML = opts.map(o=>
      `<option value="${o.key}">${o.label}</option>`
    ).join('');
    elMap.monthSelect.value = activeMonthKey;
  }
  function bpTotalsAfterRowsTemp(rows){
    const t={Essentials:0,Discretionary:0,Debt:0,Other:0};
    rows.forEach(r=>{
      t[r.cat]=(t[r.cat]||0)+(+r.month||0);
    });
    t.All=t.Essentials+t.Discretionary+t.Debt+t.Other;
    return t;
  }
  function loadMonthData(key){
    activeMonthKey = key;
    const mObj = monthData[key] || {};
    BP_ROWS = Array.isArray(mObj.rows) ? JSON.parse(JSON.stringify(mObj.rows)) : [];
    BP_ID = BP_ROWS.reduce((mx,r)=>Math.max(mx,r.id||0),0)+1;
    if(mObj.core!=null) elMap.exCore.value = mObj.core;
    else elMap.exCore.value = '';
    if(mObj.disc!=null) elMap.exDisc.value = mObj.disc;
    else elMap.exDisc.value = '';
    if(BP_ROWS.length===0){
      BP_ROWS=[
        {id:1,cat:'Essentials',name:'Rent',month:1200},
        {id:2,cat:'Essentials',name:'Utilities',month:250},
        {id:3,cat:'Essentials',name:'Insurance',month:300},
        {id:4,cat:'Debt',name:'Car Payment',month:400},
        {id:5,cat:'Discretionary',name:'Food & Dining',month:600},
        {id:6,cat:'Discretionary',name:'Entertainment',month:200},
        {id:7,cat:'Debt',name:'Credit Cards',month:300}
      ];
      BP_ID=8;
      const t=bpTotalsAfterRowsTemp(BP_ROWS);
      if(!elMap.exCore.value) elMap.exCore.value = Math.round(t.Essentials+t.Debt+t.Other);
      if(!elMap.exDisc.value) elMap.exDisc.value = Math.round(t.Discretionary);
    }
    bpRender();
    renderMonthStatusHint();
  }
  function saveCurrentMonth(){
    const core = +elMap.exCore.value||0;
    const disc = +elMap.exDisc.value||0;
    monthData[activeMonthKey] = {
      rows: JSON.parse(JSON.stringify(BP_ROWS)),
      core,
      disc,
      meta:{
        saved:true,
        ts:Date.now()
      }
    };
    try{
      localStorage.setItem('rs.monthly', JSON.stringify(monthData));
    }catch(_){}
    renderMonthStatusHint();
  }
  function renderMonthStatusHint(){
    const mObj = monthData[activeMonthKey];
    if(!mObj || !mObj.meta || !mObj.meta.saved){
      elMap.monthStatus.textContent = "No data saved for this month.";
    } else {
      const d=new Date(mObj.meta.ts||Date.now());
      elMap.monthStatus.textContent =
        "Saved • " + d.toLocaleString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'});
    }
  }
  elMap.monthSelect?.addEventListener('change',e=>{
    loadMonthData(e.target.value);
    renderAll();
    persistBridge();
  });
  elMap.bpAdd?.addEventListener('click',()=>{
    const cat = elMap.bpCat.value || 'Essentials';
    const name= elMap.bpName.value.trim() || 'Item';
    const m   = +elMap.bpMonth.value||0;
    BP_ROWS.push({id:BP_ID++, cat, name, month:m});
    elMap.bpName.value='';
    elMap.bpMonth.value='';
    bpRender();
    renderAll();
  });
  elMap.bpSaveMonth?.addEventListener('click',()=>{
    saveCurrentMonth();
    elMap.bpNote.textContent="Saved! Month totals copied up top and will flow into analysis.";
    setTimeout(()=>{
      elMap.bpNote.textContent="Month saved. These numbers auto-fill the fields above, feed KPIs, and feed the Analysis Dashboard.";
    },2000);
    renderAll();
    persistBridge();
  });
  elMap.exCore?.addEventListener('input',()=>{
    renderAll();
  });
  elMap.exDisc?.addEventListener('input',()=>{
    renderAll();
  });
  /* =======================
     #10 SAVINGS + MORTGAGE EVENTS
  ======================= */
  elMap.saveRate?.addEventListener('input',()=>{
    elMap.saveRateLbl.textContent = elMap.saveRate.value+'%';
    renderAll();
  });
  elMap.cs?.addEventListener('input',()=>{
    const score=+elMap.cs.value||720;
    const band = score>=760?'Excellent'
               : score>=720?'Good'
               : score>=680?'Fair'
               : score>=640?'OK-ish'
               : score>=620?'Weak'
               : 'Subprime';
    elMap.csLabel.textContent = score+" – "+band;
    if(!elMap.hRate.dataset.touched){
      elMap.hRate.value = rsAPRFromScore(score).toFixed(2);
    }
    renderAll();
  });
  elMap.hRate?.addEventListener('input',()=>{
    elMap.hRate.dataset.touched='1';
    renderAll();
  });
  function updateDownLabels(){
    const snap=computeSnapshot();
    elMap.dpPctLabel.textContent = (snap.dpPct*100).toFixed(0)+'%';
    elMap.dpAmtLabel.textContent = fmt(snap.downAmount);
    elMap.dpAmt.value            = fmt(snap.downAmount);
  }
  elMap.dpSlider?.addEventListener('input',()=>{
    updateDownLabels();
    renderAll();
  });
  elMap.hPrice?.addEventListener('input',()=>{
    updateDownLabels();
    renderAll();
  });
  ['hTerm','hTIHOA','hPMI','svCurrent','svInvest','svNotes','inAddl','inAddlVet']
  .forEach(id=>{
    elMap[id]?.addEventListener('input',()=>{
      renderAll();
    });
  });
  elMap.btnCalc?.addEventListener('click',()=>{
    renderAll();
    persistBridge();
  });
  elMap.btnClear?.addEventListener('click',()=>{
    $$('input').forEach(inp=>{
      if(inp.type==='range') return;
      if(inp.disabled) return;
      if(inp===elMap.cs || inp===elMap.dpSlider) return;
      if(inp===elMap.hRate) { inp.dataset.touched=''; }
      inp.value='';
    });
    elMap.saveRate.value=15;
    elMap.saveRateLbl.textContent='15%';
    elMap.cs.value=720;
    elMap.csLabel.textContent='720 – Good';
    elMap.hRate.value=rsAPRFromScore(720).toFixed(2);
    elMap.dpSlider.value=20;
    elMap.dpPctLabel.textContent='20%';
    elMap.dpAmtLabel.textContent='$0';
    elMap.dpAmt.value='$0';
    elMap.milBreak.textContent='—';
    renderAll();
    persistBridge();
  });
  /* =======================
     #11 KPI / GRADE RENDER
  ======================= */
  function renderAll(){
    updateIncomeNumbers();
    renderBenefits();
    const snap = computeSnapshot();
    const grd  = computeGrade(snap);
    if(elMap.kIncome)   elMap.kIncome.textContent   = fmt(snap.income);
    if(elMap.kExp)      elMap.kExp.textContent      = fmt(snap.baseCore+snap.baseDisc+snap.saveContribution);
    if(elMap.kMortgage) elMap.kMortgage.textContent = fmt(snap.housing);
    if(elMap.kSave)     elMap.kSave.textContent     = fmt(snap.savingsTotalKPI);
    const dispAfterAll = snap.disposable;
    if(elMap.kDisp){
      elMap.kDisp.textContent = (dispAfterAll>=0)
        ? fmt(dispAfterAll)
        : ('-'+fmt(Math.abs(dispAfterAll)));
    }
    if(elMap.gradeLetter) elMap.gradeLetter.textContent = grd.letter;
    if(elMap.gradeBand)   elMap.gradeBand.textContent   = grd.band+' / Spending Load';
    if(elMap.gradeLeft){
      elMap.gradeLeft.textContent = (dispAfterAll>=0)
        ? fmt(dispAfterAll)
        : ('-'+fmt(Math.abs(dispAfterAll)));
    }
    if(elMap.gradeDot){
      if(grd.letter[0]==='A'||grd.letter[0]==='B'){
        elMap.gradeDot.style.background='var(--ok)';
      } else if(grd.letter[0]==='C'){
        elMap.gradeDot.style.background='var(--warn)';
      } else {
        elMap.gradeDot.style.background='var(--bad)';
      }
      elMap.gradeDot.style.boxShadow='0 0 8px rgba(255,255,255,.4)';
    }
    if(elMap.gradeMeter){
      const w = Math.max(0,Math.min(1,grd.burnShare))*100;
      elMap.gradeMeter.style.width = w+'%';
    }
    const inferredAPR = rsAPRFromScore(elMap.cs.value);
    const usedAPR = Number(elMap.hRate.value)||inferredAPR;
    if(elMap.aprLabel){
      elMap.aprLabel.textContent = usedAPR.toFixed(2)+'%';
    }
    updateDownLabels();
  }
  /* =======================
     #12 BRIDGE BUILDER (→ /verify)
     ======================= */
  function b64url(str){
    return btoa(unescape(encodeURIComponent(str)))
      .replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');
  }
  function buildBridgePayload(){
    const snap=computeSnapshot();
    const score=+elMap.cs.value||720;
    const id = persistIdentity();
    const prof = getProfileStore();
    const itemRows = BP_ROWS.map(r=>({
      name:r.name,
      amount:+r.month||0,
      cat:r.cat||'Other'
    }));
    let allMonths = {};
    try { allMonths = JSON.parse(localStorage.getItem('rs.monthly') || '{}'); } catch { allMonths = {}; }
    const monthMeta = {
      activeMonth: activeMonthKey,
      totalMonths: Object.keys(allMonths).length
    };
    return {
      identity: id,
      profile: {
        name: id.name,
        email: id.email,
        branch: '',
        rankTitle: id.rankTitle
      },
      military: {
        rank: id.rankPaygrade,
        branch: ''
      },
      income: Math.round(snap.income),
      expenses: Math.round(snap.baseCore + snap.baseDisc + snap.saveContribution),
      savings: Math.round(snap.savingsTotalKPI),
      creditScore: score,
      price: Math.round(snap.price),
      apr: (Number(elMap.hRate.value) || snap.inferredAPR),
      termYears: Math.max(1, Number(elMap.hTerm.value) || 30),
      tihoa: Math.round(snap.tihoa),
      pmi: Math.round(snap.pmi),
      dpPct: Math.max(0, Math.min(100, Number(elMap.dpSlider.value) || 0)),
      dpAmt: Math.round(snap.downAmount),
      pAndI: Math.round(snap.pAndI),
      housing: Math.round(snap.housing),
      itemizedRows: itemRows,
      monthlyHistory: allMonths,
      monthInfo: monthMeta,
      benefitsProfile: prof
    };
  }
  function persistBridge(){
    const payload = buildBridgePayload();
    try{
      localStorage.setItem('realtysass.bridge', JSON.stringify(payload));
    }catch(_){}
    return payload;
  }
  function cleanPhone(p){
    return String(p||'').replace(/[^\d+]/g,'').trim();
  }
  function lastNameOf(full){
    return String(full||'').trim().split(/\s+/).slice(-1)[0] || '';
  }
  elMap.analyzeBtn?.addEventListener('click',()=>{
    const payload = persistBridge() || {};
    const ident = JSON.parse(localStorage.getItem('realtysass.identity')||'{}') || {};
    const who   = ident;
    payload.identity = payload.identity || {};
    Object.assign(payload.identity, who);
    payload.email    = who.email || payload.email || '';
    payload.phone    = cleanPhone(who.phone) || payload.phone || '';
    payload.lastName = who.lastName || payload.lastName || lastNameOf(who.name||who.firstName||'');
    payload.rank     = who.rankTitle || who.rankPaygrade || payload.rank || '';
    try{
      localStorage.setItem('realtysass.bridge', JSON.stringify(payload));
    }catch(_){}
    const packed = b64url(JSON.stringify(payload));
    elMap.analyzeBtn.href = '/verify#rsb='+packed;
  });
  /* =======================
     #13 INIT
  ======================= */
  MODE='VET';
  populateMonthSelect();
  loadMonthData(activeMonthKey);
  persistIdentity();
  applyMode();
  renderAll();
  persistBridge();
})();
</script>
      </div>
    </section>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=68cecb820ec3dbdca3ef9099" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../js/webflow.js" type="text/javascript"></script>
</body>
</html>